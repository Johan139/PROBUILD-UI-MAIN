<mat-card class="pdf-viewer-card" #pdfViewerCard>
  <mat-card-header>
    <div class="header-controls">
      <div *ngIf="blueprints.length > 1" class="dropdown-container">
        <select (change)="onPdfSelectionChange($event)">
          <option *ngFor="let blueprint of blueprints" [value]="blueprint.pdfUrl" [selected]="blueprint === selectedBlueprint">
            {{ blueprint.name }}
          </option>
        </select>
      </div>
      <mat-button-toggle-group *ngIf="isBlueprintLoaded" [value]="viewMode" class="view-toggle">
        <mat-button-toggle value="pdf" class="toggle-button" (click)="onViewModeChange('pdf')"><mat-icon>picture_as_pdf</mat-icon> PDF View</mat-button-toggle>
        <mat-button-toggle value="interactive" class="toggle-button" (click)="onViewModeChange('interactive')"><mat-icon>layers</mat-icon> Interactive</mat-button-toggle>
      </mat-button-toggle-group>
      <button mat-icon-button (click)="openPopout()" class="pop-out-icon">
        <mat-icon>open_in_new</mat-icon>
      </button>
    </div>
  </mat-card-header>

  <mat-card-content class="pdf-container" #viewerContainer>
    <ng2-pdfjs-viewer *ngIf="viewMode === 'pdf'" [pdfSrc]="pdfSrc" [page]="page" (onPagesInit)="onPdfTotalPages($event)"></ng2-pdfjs-viewer>

    <div *ngIf="viewMode === 'interactive'" class="interactive-container">
      <div *ngIf="isImageLoading" class="loading-spinner"><mat-spinner></mat-spinner></div>
      <div class="panzoom-content" #panzoomContent>
        <img [src]="currentImageUrl" (load)="onImageLoad($event)" *ngIf="currentImageUrl" [hidden]="isImageLoading" alt="Blueprint Page"/>
        <app-blueprint-overlay *ngIf="(overlayState.isOverlayVisible$ | async) && imageDimensions" [imageDimensions]="imageDimensions"></app-blueprint-overlay>
      </div>
    </div>
  </mat-card-content>

  <!-- <mat-card-actions class="pdf-actions">
    <button mat-button (click)="setPage(page - 1)" [disabled]="page <= 1"><mat-icon>keyboard_arrow_left</mat-icon> Previous</button>
    <span>Page {{ page }} / {{ totalPages }}</span>
    <button mat-button (click)="setPage(page + 1)" [disabled]="page >= totalPages">Next <mat-icon>keyboard_arrow_right</mat-icon></button>
  </mat-card-actions> -->
  <div class="resize-handle" (mousedown)="onResizeStart($event)"></div>
</mat-card>
