@use 'styles/util/mixins' as u;

/* Page shell */
:host {
  display: block;
  background: transparent;
  color: var(--color-text);
}

.assignments-container {
  width: 100%;
  max-width: 1700px;
  margin: 2rem auto 0;
  padding-inline: var(--space-4);
}

/* Card */
.container {
  width: min(1200px, 95vw);
  margin: 2rem auto;
}

.profile-card {
  background: var(--color-surface);
  border: 1px solid color-mix(in oklab, var(--color-accent) 60%, var(--color-border));
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-1);
  padding: var(--space-6);
}

mat-card-title {
  font: var(--fw-extrabold) var(--fs-lg)/var(--lh-tight) var(--font-sans);
  color: var(--color-text);
  text-transform: uppercase;
  letter-spacing: .02em;
  margin-bottom: var(--space-3);
}

mat-divider {
  background: var(--color-primary);
  border: 0;
  height: 2px;
  margin: var(--space-4) 0;
}

/* Sections */
.section {
  margin-bottom: var(--space-8);

  h3 {
    font: var(--fw-bold) var(--fs-lg)/var(--lh-tight) var(--font-sans);
    color: var(--color-text);
    text-transform: uppercase;
    letter-spacing: .02em;
    margin-bottom: var(--space-4);
  }
}

/* Form row */
.form-row {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-4);
  margin-bottom: var(--space-5);

  mat-form-field {
    flex: 1 1 30%;
    min-width: 200px;
  }
}

/* Job selection width guard */
.job-selection {
  mat-form-field {
    width: 100%;
    max-width: 420px;
  }
}

/* Material form tweaks */
.no-border {
  ::ng-deep .mdc-text-field--filled:not(.mdc-text-field--disabled) {
    background: transparent !important;
    border: 0 !important;
    box-shadow: none !important;
  }
}

:host {
  /* subtle rounded inputs everywhere here */
  --mdc-outlined-text-field-container-shape: var(--radius-sm);
}

::ng-deep .mdc-floating-label {
  position: static !important;
  font-size: .9rem;
  color: var(--color-text);
}
::ng-deep .mdc-text-field--filled:not(.mdc-text-field--disabled) {
  background: var(--color-surface) !important;
  border-radius: var(--radius-sm);
  border: 1px solid color-mix(in oklab, var(--color-accent) 60%, var(--color-border));
}

/* Table wrapper */
.table-container {
  width: 100%;
  overflow-x: auto;
}

/* Themed table */
.themed-table {
  width: 100%;
  border-collapse: collapse;
  border-radius: var(--radius-md);
  overflow: hidden; /* clip sticky header radius */
  box-shadow: var(--shadow-1);
  text-align-last: center;

  thead, th {
    background: var(--color-primary);
    color: var(--color-text-inverse);
  }

  th {
    text-align: left;
    font-weight: var(--fw-semibold);
    padding: 12px;
    border-bottom: 2px solid var(--color-border);
    position: sticky;
    top: 0;
    z-index: 1;
  }

  tr {
    transition: background-color .2s ease;
  }

  td {
    padding: 12px;
    border: 1px solid var(--color-border);
    color: var(--color-text);
    vertical-align: middle;
  }

  tbody tr:nth-child(even) {
    background: var(--color-surface-subtle);
  }

  tbody tr:hover {
    background: var(--color-surface-hover);
  }
}

/* Buttons */
.submit-btn,
.button-container .submit-btn,
.action-item .delete-btn,
button[mat-raised-button] {
  background: var(--color-primary);
  color: var(--color-text-inverse) !important;
  font-weight: var(--fw-semibold);
  border-radius: var(--radius-md);
  padding: 10px 20px;
  transition: background-color .2s ease, box-shadow .2s ease, transform .02s ease;
  box-shadow: 0 2px 4px rgba(0,0,0,.08);
  @include u.interactive-states;

  &:hover { background: var(--color-primary-hover); box-shadow: 0 3px 6px rgba(0,0,0,.12); }
  &:disabled { background: #ccc; color: #666; cursor: not-allowed; box-shadow: none; }
}

/* Destructive variation */
.submit-btn.delete-btn,
.action-item .delete-btn {
  background: var(--color-danger);
  color: var(--color-text);

  &:hover { background: color-mix(in oklab, var(--color-danger) 85%, black); }
}

/* Inline button group */
.button-container {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-3);
  margin-top: var(--space-4);
  justify-content: flex-start;
}

/* Action list items (within table or forms) */
.action-item {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  margin-bottom: var(--space-2);

  span {
    font-size: .9rem;
    color: var(--color-text);
  }

  .delete-btn {
    padding: 6px 12px;
    font-size: .85rem;
    border-radius: var(--radius-sm);
  }
}

/* Job role cursor cues */
.job-role-field {
  &.filled input { cursor: default; }
  &:not(.filled) input { cursor: help; }
}

/* Alert modal */
.alert-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.5);
  backdrop-filter: blur(6px);
  display: grid;
  place-items: center;
  z-index: 1000;
}

.alert-modal {
  width: 320px;
  background: var(--color-surface);
  color: var(--color-text);
  padding: var(--space-6);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-3);
  text-align: center;

  p { margin-bottom: var(--space-4); }
  button { background: var(--color-primary); color: var(--color-text); }
}

/* Hover/focus rings for a11y */
.submit-btn:focus-visible,
.button-container button:focus-visible,
.action-item .delete-btn:focus-visible,
.nav-item:focus-visible {
  outline: 0;
  box-shadow: 0 0 0 2px color-mix(in oklab, var(--color-primary) 60%, transparent);
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}

/* Responsive */
@media (max-width: 1024px) {
  .assignments-container { padding-inline: var(--space-3); }
}

@media (max-width: 768px) {
  .form-row { flex-direction: column; align-items: stretch; }
  .profile-card { padding: var(--space-5); }
  .alert-modal { width: min(92vw, 360px); }
}
