@use 'styles/util/mixins' as u;

:host {
  display: block;
  padding: var(--space-6, 2rem);
  background: var(--color-canvas);
  color: var(--color-text);
  font-family: var(--font-sans, system-ui, -apple-system, Segoe UI, Roboto, sans-serif);
}

/* Shell */
.bidding-container {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md, 8px);
  box-shadow: var(--shadow-1);
  padding: var(--space-6, 2rem);

  h1 {
    color: var(--color-text);
    font-weight: var(--fw-bold, 700);
    margin-bottom: var(--space-5, 1.5rem);
    letter-spacing: .2px;
  }

  /* Toolbar */
  .toolbar {
    display: flex;
    gap: var(--space-3, 1rem);
    margin-bottom: var(--space-5, 1.5rem);

    input {
      flex: 1 1 auto;
      padding: .75rem .875rem;
      background: var(--color-surface);
      color: var(--color-text);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-sm, 6px);
      transition: border-color .15s ease, box-shadow .15s ease;

      &::placeholder { color: var(--color-text-muted); }

      &:focus {
        outline: 0;
        border-color: var(--color-primary);
        box-shadow: 0 0 0 3px color-mix(in oklab, var(--color-primary) 25%, transparent);
      }
    }

    .action-btn {
      --btn-bg: var(--color-primary);
      --btn-bg-hover: var(--color-primary-hover);
      --btn-bg-active: var(--color-primary-active);
      --btn-fg: var(--color-text-inverse);

      display: inline-flex; align-items: center; justify-content: center;
      padding: .75rem 1.25rem;
      border: 0;
      border-radius: var(--radius-sm, 6px);
      background: var(--btn-bg);
      color: var(--btn-fg);
      font-weight: var(--fw-semibold, 600);
      cursor: pointer;
      box-shadow: var(--shadow-1);
      transition: background-color .2s ease, box-shadow .2s ease, transform .02s ease;
      @include u.interactive-states;

      &:hover { background: var(--btn-bg-hover); box-shadow: var(--shadow-2); }
      &:active { background: var(--btn-bg-active); transform: translateY(1px); }
      &:disabled { background: color-mix(in oklab, var(--color-border) 60%, transparent); color: var(--color-text-muted); cursor: not-allowed; box-shadow: none; }
      &:focus-visible {
        outline: 0;
        box-shadow: 0 0 0 3px color-mix(in oklab, var(--color-primary) 25%, transparent), var(--shadow-2);
      }
    }
  }

  /* Table */
  .bids-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    overflow: hidden;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md, 8px);
    background: var(--color-surface);

    thead th {
      position: sticky; top: 0; z-index: 1;
      background: var(--color-surface-subtle);
      color: var(--color-text);
      font-weight: var(--fw-semibold, 600);
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid var(--color-border);
      cursor: pointer;
      transition: background-color .15s ease;

      &:hover { background: var(--color-surface-hover); }
    }

    tbody td {
      padding: 1rem;
      color: var(--color-text);
      border-bottom: 1px solid var(--color-border);
      vertical-align: middle;
    }

    /* Row states */
    tbody tr:nth-child(even) td { background: color-mix(in oklab, var(--color-accent) 6%, transparent); }
    tbody tr:hover td { background: var(--color-surface-hover); }
    tbody tr[aria-selected="true"] td {
      background: color-mix(in oklab, var(--color-focus) 10%, transparent);
    }

    /* Per-row action buttons */
    .action-btn {
      --btn-bg: var(--color-success);
      --btn-bg-hover: color-mix(in oklab, var(--color-success) 85%, black 0%);
      --btn-bg-active: color-mix(in oklab, var(--color-success) 75%, black 0%);
      --btn-fg: var(--color-text-inverse);

      display: inline-flex; align-items: center; justify-content: center;
      padding: .5rem 1rem;
      border: 0;
      border-radius: var(--radius-sm, 6px);
      background: var(--btn-bg);
      color: var(--btn-fg);
      font-weight: var(--fw-semibold, 600);
      cursor: pointer;
      transition: background-color .2s ease, transform .02s ease, box-shadow .2s ease;

      &:hover { background: var(--btn-bg-hover); box-shadow: var(--shadow-1); }
      &:active { background: var(--btn-bg-active); transform: translateY(1px); }
    }

    /* Optional */
    .action-btn--danger {
      --btn-bg: var(--color-danger);
      --btn-bg-hover: color-mix(in oklab, var(--color-danger) 90%, black 0%);
      --btn-bg-active: color-mix(in oklab, var(--color-danger) 80%, black 0%);
    }
    .action-btn--ghost {
      --btn-bg: transparent;
      --btn-bg-hover: var(--color-surface-hover);
      --btn-bg-active: var(--color-surface-hover);
      --btn-fg: var(--color-text);
      border: 1px solid var(--color-border);
    }
  }
}

/* Responsive */
@media (max-width: 768px) {
  :host { padding: var(--space-4, 1rem); }

  .bidding-container {
    padding: var(--space-4, 1rem);

    .toolbar {
      flex-direction: column;
      align-items: stretch;

      .action-btn { width: 100%; }
    }

    .bids-table thead th,
    .bids-table tbody td {
      padding: .75rem;
    }
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}
